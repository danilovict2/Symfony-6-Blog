{% extends 'base.html.twig' %}

{% block title %}
	{{ parent() }} - {{ tag }} Tag
{% endblock %}


{% block body %}
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<h1>{{ tag }} Tag <small>{{ 'nb_of_posts'|trans({count: tag.posts|length}) }}</small></h1>
			</div>
			<div class="col-md-2">
				<a href="{{ path('tag_edit', {'id' : tag.id}) }}" class="btn btn-primary w-75 mt-2">Edit</a>
			</div>
            <div class="col-md-2">
                <form action="{{ path('tag_delete', {'id' : tag.id}) }}" method="POST">
					<input type="submit" value="Delete" class="btn btn-danger w-75 mt-2" onclick="return confirm('Are you sure you want to delete this tag?')"/>
				</form>
            </div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<table class="table">
					<thead>
						<tr>
							<th>Title</th>
                            <th>Body</th>
							<th>Tags</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						{% for post in tag.posts %}
							<tr>
								<td>{{ post.title }}</td>
                                <td>{{ post.body|u.truncate(50) }}
									{% if post.body|length > 50 %}...
									{% endif %}
								</td>
								<td>
									{% for tag in post.tags %}
										<span class="badge bg-secondary">{{ tag }}</span>
									{% endfor %}
								</td>
                                <td>
									<a href="{{ path('post_show', {'slug' : post.slug}) }}" class="btn btn-outline-dark btn-sm">View</a>
                                </td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
{% endblock %}
